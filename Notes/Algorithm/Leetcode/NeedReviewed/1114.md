https://leetcode-cn.com/problems/print-in-order/
>Version 1.0
sleep æ•ˆçŽ‡æ¯”è¾ƒä½Ž

```Java
class Foo {
    static int i = 1;

    public Foo() {    
    }

    public void first(Runnable printFirst) throws InterruptedException {
        // printFirst.run() outputs "first". Do not change or remove this line.
        printFirst.run();
        i++;
    }

    public void second(Runnable printSecond) throws InterruptedException {
        if(i != 2){
            Thread.sleep(1000);
        }
        i++;
        // printSecond.run() outputs "second". Do not change or remove this line.
        printSecond.run();
    }

    public void third(Runnable printThird) throws InterruptedException {
        if(i != 3){
            Thread.sleep(1000);
        }
        // printThird.run() outputs "third". Do not change or remove this line.
        printThird.run();
    }
}
```

>Version 2.0
é€šè¿‡synchronizedèŽ·å¾—é”,ä¹‹åŽè¿›å…¥waitçŠ¶æ€çš„è¯,å†æ¬¡è¿”å›žæ—¶å°†æ‰§è¡ŒæŽ¥ä¸‹æ¥çš„è¯­å¥
å¿…é¡»ç”¨whileå¾ªçŽ¯æ¯æ¬¡ç¡®ä¿çŠ¶æ€é€šè¿‡
åŒæ—¶è¿›å…¥waitçŠ¶æ€æ—¶é”å°†è‡ªåŠ¨è¢«é‡Šæ”¾
```Java
class Foo {
    public static int timer= 1;
    public static Object Locker = new Object();

    public Foo() {    
    }

    public void first(Runnable printFirst) throws InterruptedException {
        // printFirst.run() outputs "first". Do not change or remove this line.
        printFirst.run();
        timer++;
    }

    public void second(Runnable printSecond) throws InterruptedException {
        try{
            synchronized(Locker){
                if(timer != 2){
                    Locker.wait();
                }
                else{
                    timer++;
                }
            }
        }catch (InterruptedException e) {}
        // printSecond.run() outputs "second". Do not change or remove this line.
        printSecond.run();

        notifyAll();
    }

    public void third(Runnable printThird) throws InterruptedException {
        try{
            synchronized(Locker){
                if(timer != 3){
                    Locker.wait();
                }
                else{
                    timer++;
                }
            }
        }catch (InterruptedException e) {}
        // printThird.run() outputs "third". Do not change or remove this line.
        printThird.run();
    }
}
```

>Version 3.0

```Java
class Foo {
    public static int timer= 1;
    public static Object Locker = new Object();

    public Foo() {    
    }

    public void first(Runnable printFirst) throws InterruptedException {
        synchronized(Locker){
            printFirst.run();
            timer++;
            Locker.notifyAll();
        }
    }

    public void second(Runnable printSecond) throws InterruptedException {
        synchronized(Locker){
            while(timer != 2){
                Locker.wait();
            }
            printSecond.run();
            timer++;
            Locker.notifyAll();
        }
    }

    public void third(Runnable printThird) throws InterruptedException {
        synchronized(Locker){
            while(timer != 3){
                Locker.wait();
            }
            printThird.run();
            Locker.notifyAll();
        }
    }
}
```

>Version 4.0
  Lockerå³ä¸ºè°ƒç”¨classæœ¬èº«,èŽ·å–thiså³å¯èŽ·å¾—ðŸ”’
  ä½†è¿™ä¸ªæ–¹æ³•è¿˜æ˜¯è¶…æ—¶

```Java
class Foo {
    public static int timer= 1;

    public Foo() {    
    }

    public void first(Runnable printFirst) throws InterruptedException {
        synchronized(this){
            printFirst.run();
            timer++;
            this.notifyAll();
        }
    }

    public void second(Runnable printSecond) throws InterruptedException {
        synchronized(this){
            while(timer != 2){
                this.wait();
            }
            printSecond.run();
            timer++;
            this.notifyAll();
        }
    }

    public void third(Runnable printThird) throws InterruptedException {
        synchronized(this){
            while(timer != 3){
                this.wait();
            }
            printThird.run();
            this.notifyAll();
        }
    }
}
```


>Version 5.0
ä¸çŸ¥é“çº¿ç¨‹æ‰§è¡Œå®Œä»¥åŽçš„çŠ¶æ€,ç¡®ä¿é¿å…å¹²æ‰°ä¹ŸåŠ äº†whileå¾ªçŽ¯

```Java
class Foo {
    public static int timer= 1;

    public Foo() {    
    }

    public void first(Runnable printFirst) throws InterruptedException {
        synchronized(this){
            while(timer != 1){               
                this.wait();
            }
            printFirst.run();
            timer++;
            this.notifyAll();
        }
    }

    public void second(Runnable printSecond) throws InterruptedException {
        synchronized(this){
            while(timer != 2){
                this.wait();
            }
            printSecond.run();
            timer++;
            this.notifyAll();
        }
    }

    public void third(Runnable printThird) throws InterruptedException {
        synchronized(this){
            while(timer != 3){
                this.wait();
            }
            printThird.run();
            timer = 1;
            this.notifyAll();
        }
    }
}
```

>æ­£è§£

```Java
>æ­£è§£ä¸€
 class Foo {
    //æŽ§åˆ¶å˜é‡
    private int flag = 0;
    //å®šä¹‰Objectå¯¹è±¡ä¸ºé”
    private Object lock = new Object();
    public Foo() {
    }
    public void first(Runnable printFirst) throws InterruptedException {
        synchronized (lock){
            //å¦‚æžœflagä¸ä¸º0åˆ™è®©firstçº¿ç¨‹ç­‰å¾…ï¼Œwhileå¾ªçŽ¯æŽ§åˆ¶firstçº¿ç¨‹å¦‚æžœä¸æ»¡ä½æ¡ä»¶å°±ä¸€ç›´åœ¨whileä»£ç å—ä¸­ï¼Œé˜²æ­¢å‡ºçŽ°ä¸­é€”è·³å…¥ï¼Œæ‰§è¡Œä¸‹é¢çš„ä»£ç ï¼Œå…¶ä½™çº¿ç¨‹whileå¾ªçŽ¯åŒç†
            while( flag != 0){
                lock.wait();
            }
            // printFirst.run() outputs "first". Do not change or remove this line.
            printFirst.run();
            //å®šä¹‰æˆå‘˜å˜é‡ä¸º 1
            flag = 1;
            //å”¤é†’å…¶ä½™æ‰€æœ‰çš„çº¿ç¨‹
            lock.notifyAll();
        }
    }
    public void second(Runnable printSecond) throws InterruptedException {
        synchronized (lock){
            //å¦‚æžœæˆå‘˜å˜é‡ä¸ä¸º1åˆ™è®©äºŒå·ç­‰å¾…
            while (flag != 1){
                lock.wait();
            }
            // printSecond.run() outputs "second". Do not change or remove this line.
            printSecond.run();
            //å¦‚æžœæˆå‘˜å˜é‡ä¸º 1 ï¼Œåˆ™ä»£è¡¨firstçº¿ç¨‹åˆšæ‰§è¡Œå®Œï¼Œæ‰€ä»¥æ‰§è¡Œsecondï¼Œå¹¶ä¸”æ”¹å˜æˆå‘˜å˜é‡ä¸º 2
            flag = 2;
            //å”¤é†’å…¶ä½™æ‰€æœ‰çš„çº¿ç¨‹
            lock.notifyAll();
        }
    }
    public void third(Runnable printThird) throws InterruptedException {
        synchronized (lock){
            //å¦‚æžœflagä¸ç­‰äºŽ2 åˆ™ä¸€ç›´å¤„äºŽç­‰å¾…çš„çŠ¶æ€
            while (flag != 2){
                lock.wait();
            }
            // printThird.run() outputs "third". Do not change or remove this line.
            //å¦‚æžœæˆå‘˜å˜é‡ä¸º 2 ï¼Œåˆ™ä»£è¡¨secondçº¿ç¨‹åˆšæ‰§è¡Œå®Œï¼Œæ‰€ä»¥æ‰§è¡Œthirdï¼Œå¹¶ä¸”æ”¹å˜æˆå‘˜å˜é‡ä¸º 0
            printThird.run();
            flag = 0;
            lock.notifyAll();
        }
    }
}


>æ­£è§£äºŒ
class Foo {

    private boolean firstFinished;
    private boolean secondFinished;
    private Object lock = new Object();

    public Foo() {

    }

    public void first(Runnable printFirst) throws InterruptedException {

        synchronized (lock) {
            // printFirst.run() outputs "first". Do not change or remove this line.
            printFirst.run();
            firstFinished = true;
            lock.notifyAll();
        }
    }

    public void second(Runnable printSecond) throws InterruptedException {

        synchronized (lock) {
            while (!firstFinished) {
                lock.wait();
            }

            // printSecond.run() outputs "second". Do not change or remove this line.
            printSecond.run();
            secondFinished = true;
            lock.notifyAll();
        }
    }

    public void third(Runnable printThird) throws InterruptedException {

        synchronized (lock) {
           while (!secondFinished) {
                lock.wait();
            }

            // printThird.run() outputs "third". Do not change or remove this line.
            printThird.run();
        }
    }
}
```


Todo
*è€ƒè™‘volitate
